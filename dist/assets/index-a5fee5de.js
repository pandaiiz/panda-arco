import{r as s,d as P,e as U,a as l,j as e,S as q,B as p,f as A,k as E,T as N,g as R,A as z}from"./index-2fe9f87b.js";import{I as D,U as J}from"./index-a3018368.js";import"./index-ed7d1e53.js";import"./index-051f16ed.js";/* empty css              */import"./index-99f088e0.js";import{T as K,I as O}from"./index-18b86337.js";import{L as d,I as W}from"./index-1c0548d1.js";import{C as G}from"./index-ed740d17.js";import"./index-a8984739.js";import{S as H,s as Q}from"./form-de005383.js";import{getColumns as X}from"./constants-3d45d18a.js";import Y from"./edit-aacc2711.js";import{g as Z,d as _,u as $}from"./service-39d851c5.js";import L from"./mobileFilter-588aaca9.js";import F from"./index-13ef1e2d.js";import{I as ee}from"./image-d5b95c01.js";import"./index-36185895.js";import"./index-6b64cf7e.js";import"./select-view-e3752154.js";import"./index-26e1abb8.js";import"./scrollIntoView-eed899c1.js";import"./common-26ce2b19.js";import"./service-82e768f3.js";import"./index-5c024e38.js";import"./index-6e90a512.js";import"./index-e5c443e4.js";import"./editableTable-40ae939d.js";import"./service-735e5b75.js";import"./pictureUpload-f4b426bf.js";import"./index.browser-7e542916.js";import"./rotate-c57d4b9d.js";const{Title:ae}=N;function Ae(){var S,y;const[I,c]=s.useState(!1),[T,u]=s.useState(!1),[w,h]=s.useState({}),[k,f]=s.useState(!1),[t,m]=s.useState({pageSize:10,current:1,unixTime:0}),{data:o,loading:x,run:i}=P(Z,{manual:!0}),v=async(a,n)=>{switch(n){case"delete":await _(a.id),m({...t,current:1}),i(t);break;case"detail":h(a),c(!0);break}},B=s.useMemo(()=>X(v),[]);U(async()=>{i(t)},[JSON.stringify(t)]);function V({current:a,pageSize:n}){m({...t,current:a,pageSize:n})}function g(a){m({...a,pageSize:t.pageSize,current:1,unixTime:R().unix()})}const j=(a,n)=>{var C;return e(d.Item,{actions:[e(J,{accept:"image/*",action:"/api/picture/upload",showUploadList:!1,onChange:(te,r)=>{var b;if(r.status!=="done")return;const M=[{name:r==null?void 0:r.name,uid:r==null?void 0:r.uid,url:(b=r==null?void 0:r.response)==null?void 0:b.src}];$(a.id,{realitySrc:M}).then(()=>i(t))},children:e(p,{children:"上传"})},"edit")],children:e(d.Item.Meta,{avatar:(a==null?void 0:a.realitySrc.length)>0?e(z,{shape:"square",children:e(ee,{width:200,src:(C=a==null?void 0:a.realitySrc[0])==null?void 0:C.url,alt:"lamp"})}):e(z,{shape:"square",children:e(W,{})}),title:a.styleCode,description:a.techName})},n)};return window.innerWidth>500?l(G,{children:[e(ae,{heading:6,children:"款式列表"}),e(H,{onSearch:g}),e("div",{className:Q["button-group"],children:l(q,{children:[e(p,{type:"primary",icon:e(A,{}),onClick:()=>c(!0),children:"新增"}),e(p,{type:"primary",icon:e(D,{}),onClick:()=>u(!0),children:"上传"})]})}),e(K,{rowKey:"id",loading:x,onChange:V,pagination:{sizeCanChange:!0,showTotal:!0,pageSizeChangeResetCurrent:!0,current:t.current,pageSize:t.pageSize,total:(S=o==null?void 0:o.pagination)==null?void 0:S.total},columns:B,data:o==null?void 0:o.data}),I&&e(Y,{data:w,onClose:()=>{c(!1),h({}),i(t)}}),T&&e(F,{onClose:()=>{u(!1),i(t)}})]}):l(E,{children:[e(d,{style:{backgroundColor:"#ffffff"},size:"small",pagination:{sizeCanChange:!0,showTotal:!0,pageSizeChangeResetCurrent:!0,current:t.current,pageSize:t.pageSize,total:(y=o==null?void 0:o.pagination)==null?void 0:y.total},header:l("div",{style:{display:"flex",justifyContent:"space-between"},children:[e("div",{children:"款式列表"}),e(p,{type:"primary",size:"small",icon:e(O,{}),onClick:()=>f(!0)})]}),dataSource:o==null?void 0:o.data,render:j}),k&&e(L,{onSearch:g,setVisible:f})]})}export{Ae as default};
