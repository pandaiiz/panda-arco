import{R as A,a1 as qe,c as we,ad as Ln,ae as Mn,a4 as X,r as v,j as T,k as sn,Y as Z,af as me,ag as Rn,a5 as Tn,ah as Vn,C as Nn,u as jn,q as fn,ai as Dn,a2 as Fn,aj as pn,ak as cn,al as Gn,am as Un,ab as Hn,w as Kn,an as $n}from"./index-2fe9f87b.js";import{C as Bn,V as zn}from"./index-051f16ed.js";import{g as Wn,S as qn}from"./select-view-e3752154.js";var ze=globalThis&&globalThis.__assign||function(){return ze=Object.assign||function(e){for(var i,o=1,t=arguments.length;o<t;o++){i=arguments[o];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},ze.apply(this,arguments)},Jn=globalThis&&globalThis.__rest||function(e,i){var o={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&i.indexOf(t)<0&&(o[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,t=Object.getOwnPropertySymbols(e);l<t.length;l++)i.indexOf(t[l])<0&&Object.prototype.propertyIsEnumerable.call(e,t[l])&&(o[t[l]]=e[t[l]]);return o};function Yn(e,i){var o=e.prefixCls,t=e.label,l=Jn(e,["prefixCls","label"]);return A.createElement("li",ze({ref:i,className:o+"-group-title"},qe(l,["_key","children","isSelectOptGroup"])),t)}var Qn=A.forwardRef(Yn),vn=Qn;vn.__ARCO_SELECT_OPTGROUP__=!0;const Xn=vn;var Ce=globalThis&&globalThis.__assign||function(){return Ce=Object.assign||function(e){for(var i,o=1,t=arguments.length;o<t;o++){i=arguments[o];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},Ce.apply(this,arguments)},Zn=globalThis&&globalThis.__rest||function(e,i){var o={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&i.indexOf(t)<0&&(o[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,t=Object.getOwnPropertySymbols(e);l<t.length;l++)i.indexOf(t[l])<0&&Object.prototype.propertyIsEnumerable.call(e,t[l])&&(o[t[l]]=e[t[l]]);return o};function er(e,i){var o,t,l=e.style,c=e.className,w=e.wrapperClassName,r=e.disabled,S=e.prefixCls,ee=e.rtl,$=e.value,B=e.children,ne=e._isMultipleMode,V=e._isUserCreatedOption,re=e._isUserCreatingOption,G=e._valueActive,z=e._valueSelect,U=e._onMouseEnter,N=e._onMouseLeave,H=e._onClick,m=Zn(e,["style","className","wrapperClassName","disabled","prefixCls","rtl","value","children","_isMultipleMode","_isUserCreatedOption","_isUserCreatingOption","_valueActive","_valueSelect","_onMouseEnter","_onMouseLeave","_onClick"]),P="value"in e?$:""+B,h="children"in e?B:""+$,k=ne?z.indexOf(P)!==-1:z===P,K=Ce({style:l,className:we(S+"-option",(o={},o[S+"-option-selected"]=k,o[S+"-option-disabled"]=r,o[S+"-option-hover"]=P===G,o[S+"-option-empty"]=!h&&h!==0||typeof h=="string"&&/^\s*$/.test(h),o[S+"-option-rtl"]=ee,o),c),onMouseEnter:function(u){U&&U(P),m.onMouseEnter&&m.onMouseEnter(u)},onMouseLeave:function(u){N&&N(),m.onMouseLeave&&m.onMouseLeave(u)},onClick:function(u){H&&H(P,r),m.onClick&&m.onClick(u)}},qe(m,["_key","extra","isSelectOption","onClick","onMouseEnter","onMouseLeave"])),L={ref:i,role:"option","aria-selected":k};return V&&Object.assign(L,{"data-user-created":!0}),re&&Object.assign(L,{"data-user-creating":!0}),ne?A.createElement("li",Ce({},L,{className:we(S+"-option-wrapper",(t={},t[S+"-option-wrapper-selected"]=k,t[S+"-option-wrapper-disabled"]=r,t),w)}),A.createElement(Bn,{"aria-hidden":"true",className:S+"-checkbox",checked:k,disabled:r,onChange:K.onClick}),A.createElement("span",Ce({},K),h)):A.createElement("li",Ce({},L,K),h)}var nr=A.forwardRef(er),gn=nr;gn.__ARCO_SELECT_OPTION__=!0;const hn=gn;var rr=Mn,yn=/[\\^$.*+?()[\]{}|]/g,tr=RegExp(yn.source);function ir(e){return e=rr(e),e&&tr.test(e)?e.replace(yn,"\\$&"):e}var or=ir;const ar=Ln(or);function lr(e){var i=e.nodeList,o=e.pattern,t=e.highlightClassName;if(!o)return i;var l=function(c){return c&&c.props&&typeof c.props.children=="string"?v.cloneElement(c,void 0,T(ur,{text:c.props.children,keyword:o,highlightClassName:t})):c};return X(i)?i.map(function(c){return l(c)}):l(i)}function ur(e){var i=e.text,o=e.keyword,t=e.highlightClassName;if(!o)return T(sn,{children:i});o.length>1e3&&(o=o.slice(0,1e3));var l=new RegExp("("+ar(o)+")","i"),c=i.split(l);return T(sn,{children:c.map(function(w,r){return l.test(w)?T("span",{className:t,children:w},r):T("span",{children:w},r)})})}var ke=globalThis&&globalThis.__assign||function(){return ke=Object.assign||function(e){for(var i,o=1,t=arguments.length;o<t;o++){i=arguments[o];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},ke.apply(this,arguments)};function sr(e){e&&e.preventDefault()}function We(e,i){return i?!X(e)||!e.length:e===void 0}function dn(e,i,o){return o&&(i?e=Array.isArray(e)?e.map(function(t){return Z(t)&&"label"in t?t.value:t}):e:e=Z(e)&&"label"in e?e.value:e),We(e,i)?i?Array.isArray(e)?e:[]:void 0:e}function On(e){return me(e,"props.isSelectOption")||me(e,"type.__ARCO_SELECT_OPTION__")}function Cn(e){return me(e,"props.isSelectOptGroup")||me(e,"type.__ARCO_SELECT_OPTGROUP__")}function mn(e,i,o){var t=e.children,l=e.options,c=e.filterOption,w=i.inputValue,r=w===void 0?"":w,S=i.userCreatedOptions,ee=i.userCreatingOption,$=i.prefixCls,B=o===void 0?{}:o,ne=B.optionInfoMap,V=ne===void 0?new Map:ne,re=B.optionValueList,G=re===void 0?[]:re,z=B.customNodeCount,U=z===void 0?0:z,N=!1,H=!1,m=[],P=[],h=function(u){var b=me(u,"props.value"),d=me(u,"props.children");return b===void 0&&d!==null&&d!==void 0?d.toString():b},k=function(u,b,d){var E=u.label,_=u.value;return!E&&!_&&!b?(U++,"custom_node_"+U):d?b||"group_"+E:b||typeof _+"_"+_||E+"_"+V.size},K=function(u,b){var d=h(u),E=!0;c===!0?E=d!==void 0&&String(d).toLowerCase().indexOf(r.toLowerCase())!==-1:typeof c=="function"&&(E=!r||c(r,u));var _=V.get(d),W=(_==null?void 0:_._origin)==="userCreatedOptions"||(_==null?void 0:_._origin)==="userCreatingOption";if(!_||W){"_key"in u.props||(u=A.cloneElement(u,{_key:k(u.props,u.key)}));var se=V.size,q=ke(ke({child:u},u.props),{value:d,_index:se,_origin:b,_valid:E});if(V.set(d,q),W){var fe=m.findIndex(function(pe){var ce;return((ce=pe==null?void 0:pe.props)===null||ce===void 0?void 0:ce.value)===d});fe>-1&&(E?m[fe]=u:m.splice(fe,1))}else G.push(d),E&&(m.push(u),q.disabled||P.push(se))}typeof u.props.children!="string"&&(H=!0)},L=function(u,b){b&&X(u)&&u.length&&u.forEach(function(d){d=Rn(d)||Tn(d)?{label:d,value:d}:d;var E=A.createElement(hn,{_key:k(d),value:d.value,disabled:d.disabled===!0,extra:d.extra},Vn(d.label));K(E,b)})};return ee&&L([ee],"userCreatingOption"),t&&A.Children.map(t,function(u){if(Cn(u)){var b=u.props,d=b.children,E=b.options,_=mn({children:d,options:E,filterOption:c},{inputValue:r,prefixCls:$},{optionInfoMap:V,optionValueList:G,customNodeCount:U}),W=_.childrenList,se=_.optionIndexListForArrowKey,q=_.hasComplexLabelInOptions;W.length&&(m.push(A.cloneElement(u,{children:null,_key:k(u.props,u.key,!0)})),m=m.concat(W),P=P.concat(se),N=!0,H=H||q)}else On(u)?K(u,"children"):Z(u)&&u.props&&m.push(A.cloneElement(u,{_key:k(u.props,u.key)}))}),L(l,"options"),L(S,"userCreatedOptions"),{childrenList:lr({nodeList:m,pattern:r,highlightClassName:$+"-highlight"}),optionInfoMap:V,optionValueList:G,optionIndexListForArrowKey:P,hasOptGroup:N,hasComplexLabelInOptions:H}}var ue=globalThis&&globalThis.__assign||function(){return ue=Object.assign||function(e){for(var i,o=1,t=arguments.length;o<t;o++){i=arguments[o];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},ue.apply(this,arguments)},le=globalThis&&globalThis.__read||function(e,i){var o=typeof Symbol=="function"&&e[Symbol.iterator];if(!o)return e;var t=o.call(e),l,c=[],w;try{for(;(i===void 0||i-- >0)&&!(l=t.next()).done;)c.push(l.value)}catch(r){w={error:r}}finally{try{l&&!l.done&&(o=t.return)&&o.call(t)}finally{if(w)throw w.error}}return c},fr=globalThis&&globalThis.__values||function(e){var i=typeof Symbol=="function"&&Symbol.iterator,o=i&&e[i],t=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&t>=e.length&&(e=void 0),{value:e&&e[t++],done:!e}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},pr=globalThis&&globalThis.__spreadArray||function(e,i,o){if(o||arguments.length===2)for(var t=0,l=i.length,c;t<l;t++)(c||!(t in i))&&(c||(c=Array.prototype.slice.call(i,0,t)),c[t]=i[t]);return e.concat(c||Array.prototype.slice.call(i))},cr=100,dr={trigger:"click",bordered:!0,filterOption:!0,unmountOnExit:!0,defaultActiveFirstOption:!0};function vr(e,i){var o=v.useContext(Nn),t=o.getPrefixCls,l=o.renderEmpty,c=o.componentConfig,w=o.rtl,r=jn(e,dr,c==null?void 0:c.Select),S=r.children,ee=r.renderFormat,$=r.defaultActiveFirstOption,B=r.disabled,ne=r.unmountOnExit,V=r.notFoundContent,re=r.showSearch,G=r.tokenSeparators,z=r.options,U=r.filterOption,N=r.labelInValue,H=r.getPopupContainer,m=r.trigger,P=r.triggerElement,h=r.triggerProps,k=r.dropdownRender,K=r.dropdownMenuStyle,L=r.dropdownMenuClassName,u=r.virtualListProps,b=r.onChange,d=r.onSelect,E=r.onDeselect,_=r.onClear,W=r.onSearch,se=r.onFocus,q=r.onBlur,fe=r.onPopupScroll,pe=r.onVisibleChange,ce=r.onInputValueChange,Me=r.onPaste,Re=r.onKeyDown,Te=r.mode,te=r.allowCreate;Te==="tags"&&(Te="multiple",te=!0);var j=t("select"),I=Te==="multiple",Je=le(v.useState(dn(r.defaultValue,I,N)),2),_n=Je[0],Ve=Je[1],f="value"in r?dn(r.value,I,N):_n,Ne=le(fn("",{value:"inputValue"in r?r.inputValue||"":void 0}),3),M=Ne[0],bn=Ne[1],xn=Ne[2],Ye=le(fn(!1,{defaultValue:r.defaultPopupVisible,value:"popupVisible"in r?r.popupVisible:h&&"popupVisible"in h?h.popupVisible:void 0}),2),R=Ye[0],wn=Ye[1],Qe=le(v.useState(null),2),je=Qe[0],Sn=Qe[1],Xe=le(v.useState([]),2),_e=Xe[0],En=Xe[1],Ze=le(v.useState(X(f)?f[0]:f),2),D=Ze[0],de=Ze[1],ve=v.useMemo(function(){return mn({children:S,options:z,filterOption:U},{prefixCls:j,inputValue:M,userCreatedOptions:_e,userCreatingOption:je})},[S,z,U,M,je,_e]),De=ve.childrenList,x=ve.optionInfoMap,Se=ve.optionValueList,ie=ve.optionIndexListForArrowKey,An=ve.hasOptGroup,Pn=ve.hasComplexLabelInOptions,Fe=v.useRef(null),en=v.useRef(null),ge=v.useRef(null),oe=v.useRef([]),J=v.useRef(null),nn=v.useRef(M),Ge=v.useRef(null),Ue=v.useRef(0),He=v.useRef(!1),rn=Dn(j+"-popup-"),Ee=We(f,I),tn=v.useMemo(function(){var n;if($){var a=X(f)?f[0]:f,s=!Ee&&((n=x.get(a))===null||n===void 0?void 0:n._valid);return s?a:Se[ie[0]]}},[f,x,Se,ie,$,Ee]),Ae=v.useCallback(function(n,a){var s,p=x.get(n);Fe.current&&(!((s=p==null?void 0:p.child)===null||s===void 0)&&s.props)&&Fe.current.scrollTo({key:p.child.props._key,options:a})},[x]),ae=function(n,a){(n!==nn.current||a!==Ge.current)&&(bn(n),nn.current=n,Ge.current=a,ce&&ce(n,a))},he=function(n){R!==n&&(wn(n),pe&&pe(n),h&&h.onVisibleChange&&h.onVisibleChange(n))};v.useEffect(function(){I?Array.isArray(f)||Ve(f===void 0?[]:[f]):Array.isArray(f)&&Ve(f.length===0?void 0:f[0])},[I,f]),v.useEffect(function(){if(R){de(tn);var n=X(f)?f[0]:f;!Ee&&x.has(n)&&setTimeout(function(){return Ae(n)})}},[R]),v.useEffect(function(){(J.current==="up"||J.current==="down")&&(Ae(D),J.current="none")},[D]),v.useEffect(function(){de(tn)},[JSON.stringify(De.map(function(n){var a;return(a=n==null?void 0:n.props)===null||a===void 0?void 0:a.value}))]),v.useEffect(function(){oe.current=oe.current.filter(function(n){return I?X(f)&&f.indexOf(n.value)>-1:n.value===f})},[f,I]),v.useEffect(function(){if(te&&Array.isArray(f)){var n=f.filter(function(p){var g,y=x.get(p)||((g=oe.current.find(function(C){return C.value===p}))===null||g===void 0?void 0:g.option);return!y||y._origin==="userCreatingOption"}),a=_e.filter(function(p){return f.indexOf(p)!==-1}),s=a.concat(n);s.toString()!==_e.toString()&&En(s)}},[f]),v.useEffect(function(){te&&Sn(x.has(M)?null:M)},[M]),v.useEffect(function(){var n=Ge.current;xn===M&&(n==="manual"||n==="optionListHide")&&W&&W(M,n)},[M]);var be=v.useCallback(function(n){var a=x.get(n);if(a){var s=oe.current.findIndex(function(g){return g.value===n});return s>-1?oe.current.splice(s,1,{value:n,option:a}):oe.current.push({value:n,option:a}),a}var p=oe.current.find(function(g){return g.value===n});return p&&p.option},[x]),on=function(n){if(ie.length){if(D===void 0||!x.has(D))return Se[ie[0]];var a=x.get(D),s=a._index,p=ie.indexOf(s),g=ie.length;return Se[ie[((n==="up"?p-1:p+1)+g)%g]]}},Pe=function(n,a){a===void 0&&(a=We(n,I));var s=n,p=n===void 0?void 0:Array.isArray(n)?n.map(be):be(n);if(N&&!a){var g=function(y,C){var F,Oe;if(C)return C.children;var O="value"in r?r.value:"defaultValue"in r?r.defaultValue:null;if(Array.isArray(O))try{for(var Y=fr(O),Q=Y.next();!Q.done;Q=Y.next()){var xe=Q.value;if(Z(xe)&&xe.value===y)return xe.label}}catch(Be){F={error:Be}}finally{try{Q&&!Q.done&&(Oe=Y.return)&&Oe.call(Y)}finally{if(F)throw F.error}}else if(Z(O)&&O.value===y)return O.label};Array.isArray(n)?s=n.map(function(y,C){return{value:y,label:g(y,p[C])}}):s={value:n,label:g(n,p)}}return{option:p,value:s}},ye=function(n){if(Ve(n),b){var a=Pe(n);b(a.value,a.option)}},an=function(n,a){if(a==="remove"||a==="add"&&x.get(n)){var s=a==="add"?f.concat(n):f.filter(function(y){return y!==n}),p=a==="add"?d:E;if(ye(s),typeof p=="function"){var g=Pe(n,!1);p(g.value,g.option)}}},ln=function(n,a){a||(I?(an(n,f.indexOf(n)===-1?"add":"remove"),(!Z(re)||!re.retainInputValueWhileSelect)&&ae("","optionChecked")):(n!==f&&ye(n),setTimeout(function(){he(!1)})))},Ie=Wn(new Map([[Fn.code,function(){return he(!1)}],[pn.code,function(){if(R){var n=x.get(D);n&&ln(D,n.disabled)}else he(!0)}],[cn.code,function(){return he(!1)}],[Gn.code,function(){if(R)return J.current="up",de(on("up")),!1}],[Un.code,function(){if(R)return J.current="down",de(on("down")),!1}]])),In=function(){var n,a,s,p=(h==null?void 0:h.autoAlignPopupWidth)===!1&&(!(!((a=h==null?void 0:h.style)===null||a===void 0)&&a.width)||((s=h==null?void 0:h.style)===null||s===void 0?void 0:s.width)==="auto"),g=p&&Pn,y="notFoundContent"in r?V:l("Select"),C=De.length?T(zn,{...ue({id:rn,role:"listbox",style:K,className:we(j+"-popup-inner",L),ref:Fe,data:De,height:null,isStaticItemHeight:!An,measureLongestItem:p,itemKey:function(O){return O.props._key},onMouseDown:sr,onMouseMove:function(){J.current=null},onScroll:function(O){return fe&&fe(O.target)}},u,{threshold:g?null:u==null?void 0:u.threshold}),children:function(O){var Y;if(Cn(O))return A.createElement(O.type,ue({},O.props,{prefixCls:j}));if(On(O)){var Q=(Y=O.props)===null||Y===void 0?void 0:Y.value,xe={prefixCls:j,rtl:w,_valueActive:D,_valueSelect:f,_isMultipleMode:I,_isUserCreatingOption:te&&je===Q,_isUserCreatedOption:te&&_e.indexOf(Q)>-1,_onClick:ln,_onMouseEnter:function(Be){J.current===null&&de(Be)},_onMouseLeave:function(){J.current===null&&de(void 0)}};return O&&A.createElement(O.type,ue({},O.props,xe))}return O}}):null,F=te&&M,Oe=y&&!F?T("div",{style:K,className:we(j+"-popup-inner",L),children:y}):null;return T("div",{className:we(j+"-popup",(n={},n[j+"-popup-hidden"]=C===null&&Oe===null,n[j+"-popup-multiple"]=I,n)),tabIndex:-1,onKeyDown:function(O){return Ie(O)},children:typeof k=="function"?k(C||Oe):C||Oe})},Ke=function(n){var a=!1;if(I&&X(G)&&G.length){var s=n.split(new RegExp("["+G.join("")+"]"));if(s.length>1){var p=s.filter(function(C,F){return C&&s.indexOf(C)===F}),g=f.slice(0),y=!1;p.forEach(function(C){g.indexOf(C)===-1&&(te||x.get(C))&&(g.push(C),y=!0)}),y&&ye(g),a=!0}}return a},kn={onFocus:se,onBlur:function(n){q==null||q(n),!R&&!He.current&&ae("","optionListHide")},onKeyDown:function(n){if(n.target.tagName==="INPUT"&&n.target.value){var a=n.key===cn.key,s=n.key===pn.key;if(s||a){var p=s?`
`:a?"	":"";Ke(n.target.value+p)&&(Ue.current=Date.now(),ae("","tokenSeparator"))}}Ie(n),Re==null||Re(n)},onChangeInputValue:function(n,a){var s=a.nativeEvent.inputType;s==="insertFromPaste"&&Date.now()-Ue.current<cr||Ke(n)?ae("","tokenSeparator"):ae(n,"manual"),!R&&n&&he(!0)},onPaste:function(n){Ke(n.clipboardData.getData("text"))&&(Ue.current=Date.now()),Me==null||Me(n)},onRemoveCheckedItem:function(n,a,s){s.stopPropagation(),an(f[a],"remove")},onClear:function(n){if(n.stopPropagation(),I){var a=f.filter(function(s){var p=x.get(s);return p&&p.disabled});ye(a)}else ye(void 0);ae("","manual"),_==null||_(R)}};v.useImperativeHandle(i,function(){var n;return{dom:(n=ge.current)===null||n===void 0?void 0:n.dom,focus:function(){ge.current&&ge.current.focus()},blur:function(){ge.current&&ge.current.blur()},hotkeyHandler:Ie,activeOptionValue:D,getOptionInfoByValue:be,getOptionInfoList:function(){return pr([],le(x.values()),!1).filter(function(a){return a._valid})},scrollIntoView:Ae}},[Ie,x,D,be,Ae]);var un=function(n){return T($n,{...ue({ref:function(a){return en.current=a},popup:In,trigger:m,disabled:B,getPopupContainer:H,classNames:"slideDynamicOrigin",autoAlignPopupWidth:!0,popupAlign:{bottom:4},popupVisible:R,unmountOnExit:ne,onVisibleChange:he,__onExit:function(){He.current=!0},__onExited:function(){He.current=!1,ae("","optionListHide")}},qe(h,["popupVisible","onVisibleChange"])),children:n})},$e=typeof P=="function"?P(Pe(f)):P;return T(Hn,{onResize:function(){return en.current.updatePopupPosition()},children:$e!=null?un($e):T(qn,{...ue({},r,kn,{ref:ge,value:f,inputValue:M,popupVisible:R,rtl:w,prefixCls:j,ariaControls:rn,isEmptyValue:Ee,isMultiple:I,onSort:ye,renderText:function(n){var a=be(n),s=n;if(Kn(ee)){var p=Pe(n,!1);s=ee(p.option||null,p.value)}else{var g=!1;if(N){var y=r.value||r.defaultValue;if(Array.isArray(y)){var C=y.find(function(F){return Z(F)&&F.value===n});C&&(s=C.label,g=!0)}else Z(y)&&(s=y.label,g=!0)}!g&&a&&"children"in a&&(s=a.children)}return{text:s,disabled:a&&a.disabled}},renderView:un})})})}var gr=A.forwardRef(vr),Le=gr;Le.displayName="Select";Le.Option=hn;Le.OptGroup=Xn;const Cr=Le;export{Cr as S};
