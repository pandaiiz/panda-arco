import{r as n,d as A,e as B,a as l,j as a,k as D,B as z,g as E,A as w,D as M}from"./index-f50a7ad4.js";import"./index-862429a3.js";import{U as P}from"./index-9201017e.js";import"./index-f26404de.js";/* empty css              */import"./index-4a89bbe3.js";import{T as R,I as U}from"./index-13195c7d.js";import{L as h,I as N}from"./index-6558fc4e.js";import{C as O}from"./index-aa0053a0.js";import"./index-6dc1a68d.js";import{S as J}from"./form-2546ef10.js";import{getColumns as K}from"./constants-filter-5da7512a.js";import W from"./edit-823cea77.js";import{g as G,u as H}from"./service-f9aa5ca4.js";import Q from"./mobileFilter-02948859.js";import{I as x}from"./image-15044190.js";import"./index-63a71a35.js";import"./index-025950e7.js";import"./select-view-c7889b9d.js";import"./index-679f783d.js";import"./scrollIntoView-e2cb9fcb.js";import"./common-874ed4d1.js";import"./service-ad020438.js";import"./index-3fca1566.js";import"./index-2fd8deeb.js";function X({choose:p}){var S,y;const[s,c]=n.useState(!1),[m,I]=n.useState({}),[T,u]=n.useState(!1),[o,g]=n.useState({pageSize:10,current:1,unixTime:0}),{data:t,loading:k,run:d}=A(G,{manual:!0}),v=K(async(e,i)=>{switch(i){case"choose":p(e);break}});B(async()=>{d(o)},[JSON.stringify(o)]);function j({current:e,pageSize:i}){g({...o,current:e,pageSize:i})}function f(e){g({...e,pageSize:o.pageSize,current:1,unixTime:E().unix()})}const V=(e,i)=>{var C;return a(h.Item,{actions:[a(P,{accept:"image/*",action:"/api/picture/upload",showUploadList:!1,onChange:(Z,r)=>{var b;if(r.status!=="done")return;const q=[{name:r==null?void 0:r.name,uid:r==null?void 0:r.uid,url:(b=r==null?void 0:r.response)==null?void 0:b.src}];H(e.id,{realitySrc:q}).then(()=>d(o))},children:a(z,{children:"上传"})},"edit")],children:a(h.Item.Meta,{avatar:(e==null?void 0:e.realitySrc.length)>0?a(w,{shape:"square",children:a(x,{width:200,src:(C=e==null?void 0:e.realitySrc[0])==null?void 0:C.url,alt:"lamp"})}):a(w,{shape:"square",children:a(N,{})}),title:e.styleCode,description:e.techName})},i)};return window.innerWidth>500?l(O,{children:[a(J,{onSearch:f}),a(R,{rowKey:"id",loading:k,onChange:j,pagination:{sizeCanChange:!0,showTotal:!0,pageSizeChangeResetCurrent:!0,current:o.current,pageSize:o.pageSize,total:(S=t==null?void 0:t.pagination)==null?void 0:S.total},columns:v,data:t==null?void 0:t.data}),s&&a(W,{data:m,onClose:()=>{c(!1),I({}),d(o)}})]}):l(D,{children:[a(h,{style:{backgroundColor:"#ffffff"},size:"small",pagination:{sizeCanChange:!0,showTotal:!0,pageSizeChangeResetCurrent:!0,current:o.current,pageSize:o.pageSize,total:(y=t==null?void 0:t.pagination)==null?void 0:y.total},header:l("div",{style:{display:"flex",justifyContent:"space-between"},children:[a("div",{children:"款式列表"}),a(z,{type:"primary",size:"small",icon:a(U,{}),onClick:()=>u(!0)})]}),dataSource:t==null?void 0:t.data,render:V}),T&&a(Q,{onSearch:f,setVisible:u})]})}function za({visible:p,onClose:s,style:c}){return a("div",{children:l(M,{width:"100%",title:"查找款式",visible:p,onOk:()=>{s()},onCancel:s,children:["客户图： ",a(x,{src:c.imgSrc,height:120}),a(X,{choose:m=>s(m)})]})})}export{za as default};
