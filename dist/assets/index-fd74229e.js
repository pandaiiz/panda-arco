import{r,d as y,e as C,a as b,j as a,S as T,B as x,f as z,T as U,g as p}from"./index-f50a7ad4.js";import{C as j}from"./index-aa0053a0.js";import"./index-f26404de.js";/* empty css              */import"./index-4a89bbe3.js";import{T as k}from"./index-13195c7d.js";import"./index-6dc1a68d.js";import w from"./form-f34a190e.js";import{s as B}from"./index.module-6d5fffca.js";import{getColumns as P}from"./constants-ce73f3ed.js";import{g as E,U as v,d as F}from"./edit-dacce37e.js";import"./select-view-c7889b9d.js";import"./index-679f783d.js";import"./service-ad020438.js";import"./index-3fca1566.js";import"./index-51f0b48e.js";import"./index-2fd8deeb.js";import"./service-001d7c62.js";import"./common-874ed4d1.js";const{Title:I}=U;function L(){const[u,s]=r.useState(!1),[l,m]=r.useState({}),[e,i]=r.useState({pageSize:10,current:1}),{data:o,loading:d,run:c}=y(E),g=async(t,n)=>{switch(n){case"delete":await F(t.id),i({...e,current:1,unixTime:p().unix()});break;case"edit":m(t),s(!0);break}},f=r.useMemo(()=>P(g),[]);C(async()=>{c(e)},[JSON.stringify(e)]);function h({current:t,pageSize:n}){i({...e,current:t,pageSize:n})}function S(t){i({...t,pageSize:e.pageSize,current:1,unixTime:p().unix()})}return b(j,{children:[a(I,{heading:6,children:"用户列表"}),a(w,{onSearch:S}),a("div",{className:B["button-group"],children:a(T,{children:a(x,{type:"primary",icon:a(z,{}),onClick:()=>s(!0),children:"新增"})})}),a(k,{rowKey:"id",loading:d,onChange:h,pagination:{sizeCanChange:!0,showTotal:!0,pageSizeChangeResetCurrent:!0,current:e.current,pageSize:e.pageSize},columns:f,data:o==null?void 0:o.data}),u&&a(v,{data:l,onClose:()=>{c(e),m({}),s(!1)}})]})}export{L as default};
