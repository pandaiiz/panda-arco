import{r as n,d as q,e as A,a as l,j as a,k as B,B as S,g as E,A as C}from"./index-2fe9f87b.js";import{U as M}from"./index-a3018368.js";import"./index-ed7d1e53.js";import"./index-051f16ed.js";/* empty css              */import"./index-99f088e0.js";import{T as P,I as R}from"./index-18b86337.js";import{L as p,I as U}from"./index-1c0548d1.js";import{C as N}from"./index-ed740d17.js";import"./index-a8984739.js";import{S as D}from"./form-de005383.js";import{getColumns as J}from"./constants-filter-c5ec6bba.js";import K from"./edit-aacc2711.js";import{g as O,u as W}from"./service-39d851c5.js";import G from"./mobileFilter-588aaca9.js";import{I as H}from"./image-d5b95c01.js";function ca({choose:y}){var u,h;const[b,z]=n.useState(!1),[w,x]=n.useState({}),[I,c]=n.useState(!1),[o,m]=n.useState({pageSize:10,current:1,unixTime:0}),{data:t,loading:T,run:i}=q(O,{manual:!0}),k=J(async(e,r)=>{switch(r){case"choose":y(e);break}});A(async()=>{i(o)},[JSON.stringify(o)]);function j({current:e,pageSize:r}){m({...o,current:e,pageSize:r})}function d(e){m({...e,pageSize:o.pageSize,current:1,unixTime:E().unix()})}const v=(e,r)=>{var g;return a(p.Item,{actions:[a(M,{accept:"image/*",action:"/api/picture/upload",showUploadList:!1,onChange:(X,s)=>{var f;if(s.status!=="done")return;const V=[{name:s==null?void 0:s.name,uid:s==null?void 0:s.uid,url:(f=s==null?void 0:s.response)==null?void 0:f.src}];W(e.id,{realitySrc:V}).then(()=>i(o))},children:a(S,{children:"上传"})},"edit")],children:a(p.Item.Meta,{avatar:(e==null?void 0:e.realitySrc.length)>0?a(C,{shape:"square",children:a(H,{width:200,src:(g=e==null?void 0:e.realitySrc[0])==null?void 0:g.url,alt:"lamp"})}):a(C,{shape:"square",children:a(U,{})}),title:e.styleCode,description:e.techName})},r)};return window.innerWidth>500?l(N,{children:[a(D,{onSearch:d}),a(P,{rowKey:"id",loading:T,onChange:j,pagination:{sizeCanChange:!0,showTotal:!0,pageSizeChangeResetCurrent:!0,current:o.current,pageSize:o.pageSize,total:(u=t==null?void 0:t.pagination)==null?void 0:u.total},columns:k,data:t==null?void 0:t.data}),b&&a(K,{data:w,onClose:()=>{z(!1),x({}),i(o)}})]}):l(B,{children:[a(p,{style:{backgroundColor:"#ffffff"},size:"small",pagination:{sizeCanChange:!0,showTotal:!0,pageSizeChangeResetCurrent:!0,current:o.current,pageSize:o.pageSize,total:(h=t==null?void 0:t.pagination)==null?void 0:h.total},header:l("div",{style:{display:"flex",justifyContent:"space-between"},children:[a("div",{children:"款式列表"}),a(S,{type:"primary",size:"small",icon:a(R,{}),onClick:()=>c(!0)})]}),dataSource:t==null?void 0:t.data,render:v}),I&&a(G,{onSearch:d,setVisible:c})]})}export{ca as S};
