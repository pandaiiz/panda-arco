import{r as i,d as M,e as P,a as c,j as e,S as V,B as m,f as q,k as A,T as E,g as N,A as b}from"./index-f50a7ad4.js";import{U as R}from"./index-9201017e.js";import"./index-862429a3.js";import"./index-f26404de.js";/* empty css              */import"./index-4a89bbe3.js";import{T as U,I as D}from"./index-13195c7d.js";import{L as d,I as J}from"./index-6558fc4e.js";import{C as K}from"./index-aa0053a0.js";import"./index-6dc1a68d.js";import{S as O,s as W}from"./form-2546ef10.js";import{getColumns as G}from"./constants-9af881e7.js";import H from"./edit-823cea77.js";import{g as Q,d as X,u as Y}from"./service-f9aa5ca4.js";import Z from"./mobileFilter-02948859.js";import{I as _}from"./image-15044190.js";import"./index-63a71a35.js";import"./index-025950e7.js";import"./select-view-c7889b9d.js";import"./index-679f783d.js";import"./scrollIntoView-e2cb9fcb.js";import"./common-874ed4d1.js";import"./service-ad020438.js";import"./index-3fca1566.js";import"./index-51f0b48e.js";import"./index-2fd8deeb.js";const{Title:$}=E;function xe(){var f,S;const[z,l]=i.useState(!1),[T,u]=i.useState({}),[w,h]=i.useState(!1),[t,p]=i.useState({pageSize:10,current:1,unixTime:0}),{data:o,loading:I,run:n}=M(Q,{manual:!0}),x=async(a,r)=>{switch(r){case"delete":await X(a.id),p({...t,current:1}),n(t);break;case"detail":u(a),l(!0);break}},k=i.useMemo(()=>G(x),[]);P(async()=>{n(t)},[JSON.stringify(t)]);function v({current:a,pageSize:r}){p({...t,current:a,pageSize:r})}function g(a){p({...a,pageSize:t.pageSize,current:1,unixTime:N().unix()})}const j=(a,r)=>{var y;return e(d.Item,{actions:[e(R,{accept:"image/*",action:"/api/picture/upload",showUploadList:!1,onChange:(L,s)=>{var C;if(s.status!=="done")return;const B=[{name:s==null?void 0:s.name,uid:s==null?void 0:s.uid,url:(C=s==null?void 0:s.response)==null?void 0:C.src}];Y(a.id,{realitySrc:B}).then(()=>n(t))},children:e(m,{children:"上传"})},"edit")],children:e(d.Item.Meta,{avatar:(a==null?void 0:a.realitySrc.length)>0?e(b,{shape:"square",children:e(_,{width:200,src:(y=a==null?void 0:a.realitySrc[0])==null?void 0:y.url,alt:"lamp"})}):e(b,{shape:"square",children:e(J,{})}),title:a.styleCode,description:a.techName})},r)};return window.innerWidth>500?c(K,{children:[e($,{heading:6,children:"款式列表"}),e(O,{onSearch:g}),e("div",{className:W["button-group"],children:e(V,{children:e(m,{type:"primary",icon:e(q,{}),onClick:()=>l(!0),children:"新增"})})}),e(U,{rowKey:"id",loading:I,onChange:v,pagination:{sizeCanChange:!0,showTotal:!0,pageSizeChangeResetCurrent:!0,current:t.current,pageSize:t.pageSize,total:(f=o==null?void 0:o.pagination)==null?void 0:f.total},columns:k,data:o==null?void 0:o.data}),z&&e(H,{data:T,onClose:()=>{l(!1),u({}),n(t)}})]}):c(A,{children:[e(d,{style:{backgroundColor:"#ffffff"},size:"small",pagination:{sizeCanChange:!0,showTotal:!0,pageSizeChangeResetCurrent:!0,current:t.current,pageSize:t.pageSize,total:(S=o==null?void 0:o.pagination)==null?void 0:S.total},header:c("div",{style:{display:"flex",justifyContent:"space-between"},children:[e("div",{children:"款式列表"}),e(m,{type:"primary",size:"small",icon:e(D,{}),onClick:()=>h(!0)})]}),dataSource:o==null?void 0:o.data,render:j}),w&&e(Z,{onSearch:g,setVisible:h})]})}export{xe as default};
