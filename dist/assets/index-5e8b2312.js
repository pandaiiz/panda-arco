import{r as s,d as y,e as b,a as T,j as a,S as x,B as z,f as w,T as j,g as l}from"./index-f50a7ad4.js";import{C as k}from"./index-aa0053a0.js";import"./index-f26404de.js";/* empty css              */import"./index-4a89bbe3.js";import{T as B}from"./index-13195c7d.js";import"./index-6dc1a68d.js";import{S as P,s as E}from"./form-c4ed03ff.js";import{getColumns as v}from"./constants-d76bff4b.js";import F from"./edit-b0990e19.js";import{g as I,d as N}from"./service-f4aace0d.js";import"./select-view-c7889b9d.js";import"./index-679f783d.js";import"./index-3fca1566.js";import"./index-51f0b48e.js";import"./index-2fd8deeb.js";const{Title:R}=j;function _(){var c;const[p,o]=s.useState(!1),[g,m]=s.useState({}),[e,i]=s.useState({pageSize:10,current:1}),{data:t,loading:d,run:u}=y(I),f=async(r,n)=>{switch(n){case"delete":await N(r.id),i({...e,current:1,unixTime:l().unix()});break;case"detail":m(r),o(!0);break}},h=s.useMemo(()=>v(f),[]);b(async()=>{await u(e)},[JSON.stringify(e)]);function C({current:r,pageSize:n}){i({...e,current:r,pageSize:n})}function S(r){i({...r,pageSize:e.pageSize,current:1,unixTime:l().unix()})}return T(k,{children:[a(R,{heading:6,children:"客户列表"}),a(P,{onSearch:S}),a("div",{className:E["button-group"],children:a(x,{children:a(z,{type:"primary",icon:a(w,{}),onClick:()=>o(!0),children:"新增"})})}),a(B,{rowKey:"id",loading:d,onChange:C,pagination:{sizeCanChange:!0,showTotal:!0,pageSizeChangeResetCurrent:!0,current:e.current,pageSize:e.pageSize,total:(c=t==null?void 0:t.pagination)==null?void 0:c.total},columns:h,data:t==null?void 0:t.data}),p&&a(F,{data:g,onClose:()=>{o(!1),m({}),u(e)}})]})}export{_ as default};
