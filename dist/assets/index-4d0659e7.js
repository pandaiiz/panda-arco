import{r as i,d as y,e as T,a as b,j as a,S as x,B as z,f as k,T as w,g as l}from"./index-f50a7ad4.js";import{C as j}from"./index-aa0053a0.js";import"./index-f26404de.js";/* empty css              */import"./index-4a89bbe3.js";import{T as B}from"./index-13195c7d.js";import"./index-6dc1a68d.js";import{S as P,s as D}from"./form-869aba10.js";import{getColumns as E}from"./constants-5f4449a1.js";import{g as R,C as v,d as F}from"./edit-9bdd50c8.js";import"./select-view-c7889b9d.js";import"./index-679f783d.js";import"./index-3fca1566.js";import"./index-51f0b48e.js";import"./index-2fd8deeb.js";import"./common-874ed4d1.js";import"./service-ad020438.js";const{Title:I}=w;function $(){var u;const[p,s]=i.useState(!1),[g,n]=i.useState({}),[e,o]=i.useState({pageSize:10,current:1}),{data:r,loading:d,run:m}=y(R),f=async(t,c)=>{switch(c){case"delete":await F(t.id),o({...e,current:1,unixTime:l().unix()});break;case"detail":n(t),s(!0);break;case"translate":n(t),s(!0);break}},h=i.useMemo(()=>E(f),[]);T(async()=>{await m(e)},[JSON.stringify(e)]);function S({current:t,pageSize:c}){o({...e,current:t,pageSize:c})}function C(t){o({...t,pageSize:e.pageSize,current:1,unixTime:l().unix()})}return b(j,{children:[a(I,{heading:6,children:"收发记录"}),a(P,{onSearch:C}),a("div",{className:D["button-group"],children:a(x,{children:a(z,{type:"primary",icon:a(k,{}),onClick:()=>s(!0),children:"新增"})})}),a(B,{rowKey:"id",loading:d,onChange:S,pagination:{sizeCanChange:!0,showTotal:!0,pageSizeChangeResetCurrent:!0,current:e.current,pageSize:e.pageSize,total:(u=r==null?void 0:r.pagination)==null?void 0:u.total},columns:h,data:r==null?void 0:r.data}),p&&a(v,{data:g,onClose:()=>{s(!1),n({}),m(e)}})]})}export{$ as default};
