import{F as b,aY as x,r as d,j as e,a as r,h as p,n as E,aX as P,m as V,M as y,d as C,k as j,S as h,B as w,f as B,aZ as $,a_ as q,G as z,a$ as M,b0 as L,aS as S}from"./index-f50a7ad4.js";/* empty css              */import{M as v}from"./index-2fd8deeb.js";import{C as D}from"./index-aa0053a0.js";import{u as N,a as G,g as K,d as X,b as Y,R as Z,c as A}from"./edit-a9881d3f.js";import{T as k}from"./index-679f783d.js";import"./index-f26404de.js";import"./index-4a89bbe3.js";import{T as H}from"./index-13195c7d.js";import"./index-6dc1a68d.js";import{s as J}from"./index.module-6d5fffca.js";import{getColumns as Q}from"./constants-f44bdf78.js";const f=b.Item;function O({data:t,onClose:i}){const o=x(m),[l]=b.useForm();d.useEffect(()=>{t.id||l.setFieldsValue({enabled:1,sort:0})},[]);async function s(){await l.validate();const c=l.getFieldsValue(),n=V.cloneDeep(c);n.enabled=n.enabled?1:0,t.id?await N(t.id,n):await G({...n,dictId:o.id}),y.success("提交成功 !"),i()}return e("div",{children:e(v,{title:t.id?"编辑":"新增",visible:!0,onOk:s,autoFocus:!1,focusLock:!1,onCancel:i,children:r(b,{labelCol:{span:5},form:l,initialValues:t,children:[e(f,{label:"字段名",field:"title",rules:[{required:!0}],children:e(p,{placeholder:"请输入字段名"})}),e(f,{label:"编码",field:"key",rules:[{required:!0}],children:e(p,{placeholder:"请输入编码"})}),e(f,{label:"排序",field:"sort",rules:[{required:!0}],children:e(E,{min:0,defaultValue:0,step:1,precision:0})}),e(f,{label:"备注",field:"remark",children:e(p,{placeholder:"请输入备注"})}),e(f,{label:"启用",field:"enabled",triggerPropName:"checked",children:e(P,{})})]})})})}const me=Object.freeze(Object.defineProperty({__proto__:null,default:O},Symbol.toStringTag,{value:"Module"}));function T(){const t=x(m),[i,o]=d.useState(!1),[l,s]=d.useState({}),{data:c,loading:n,run:u}=C(K,{manual:!0});d.useEffect(()=>{u(t==null?void 0:t.id)},[t==null?void 0:t.id]);const a=async(g,_)=>{_==="detail"&&(s(g),o(!0)),_==="delete"&&(await X(g.id),y.success("删除成功！"),u(t==null?void 0:t.id))},R=d.useMemo(()=>Q(a),[]);return r(D,{title:t.key?`${t.title}（${t.key}）`:"请先选择左侧的字典",style:{width:"100%"},children:[t!=null&&t.id?r(j,{children:[e("div",{className:J["button-group"],children:e(h,{children:e(w,{type:"primary",icon:e(B,{}),onClick:()=>{s({}),o(!0)},children:"新增"})})}),e(H,{rowKey:"id",loading:n,pagination:!1,columns:R,data:c||[]})]}):e($,{description:"请先选择左侧的字典"}),i&&e(O,{data:l,onClose:async()=>{o(!1),u(t==null?void 0:t.id)}})]})}const pe=Object.freeze(Object.defineProperty({__proto__:null,default:T},Symbol.toStringTag,{value:"Module"})),{Row:U,Col:I}=z,m=q({key:"selectedDictState",default:{}}),W=()=>e(j,{children:r(U,{gutter:20,children:[e(I,{span:8,children:e(F,{})}),e(I,{span:16,children:e(T,{})})]})}),be=Object.freeze(Object.defineProperty({__proto__:null,default:W,selectedDictState:m},Symbol.toStringTag,{value:"Module"})),ee=M.Item;function F(){const[t,i]=L(m),[o,l]=d.useState(!1),{data:s,refresh:c}=C(Y);function n(a){v.confirm({title:"请确认是否要删除此数据！",onOk:async()=>{await A(a.id),c(),y.success("删除成功！")}})}const u=async()=>{l(!1),c()};return r(D,{title:"字典列表",style:{width:"100%"},extra:e(w,{type:"text",onClick:()=>{i({}),l(!0)},children:"新增"}),children:[e(M,{style:{height:"100%"},children:s==null?void 0:s.map(a=>r(ee,{onClick:()=>{i(a)},style:{display:"flex",justifyContent:"space-between"},children:[r(h,{children:[a.enabled===1&&e(k,{color:"green",children:"启用"}),a.enabled===0&&e(k,{color:"red",children:"停用"}),a.title]}),r(h,{children:[e(S,{onClick:()=>{i(a),l(!0)},children:"编辑"}),e(S,{status:"error",onClick:()=>n(a),children:"删除"})]})]},a.id))}),o&&e(Z,{data:t,onClose:u})]})}const he=Object.freeze(Object.defineProperty({__proto__:null,default:F},Symbol.toStringTag,{value:"Module"}));export{be as a,he as b,me as e,pe as i};
