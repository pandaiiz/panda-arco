import{r as n,d as y,e as C,a as b,j as t,S as T,B as x,f as z,T as D,g as j}from"./index-2fe9f87b.js";import{C as k}from"./index-ed740d17.js";import"./index-051f16ed.js";/* empty css              */import"./index-99f088e0.js";import{T as w}from"./index-18b86337.js";import"./index-a8984739.js";import{S as B,s as P}from"./form-210bead5.js";import{getColumns as E}from"./constants-f8c9baa9.js";import v from"./edit-7c2ec6c9.js";import{c as F,d as I}from"./service-82e768f3.js";import"./select-view-e3752154.js";import"./index-26e1abb8.js";import"./index-5c024e38.js";import"./index-6e90a512.js";import"./index-e5c443e4.js";import"./common-26ce2b19.js";const{Title:N}=D;function $(){var p;const[u,o]=n.useState(!1),[l,c]=n.useState({}),[e,s]=n.useState({unixTime:0,pageSize:10,current:1}),{data:a,loading:g,run:i}=y(F),d=async(r,m)=>{switch(m){case"delete":await I(r.id),s({...e,current:1}),i(e);break;case"edit":c(r),o(!0);break}},f=n.useMemo(()=>E(d),[]);C(async()=>{i(e)},[JSON.stringify(e)]);function h({current:r,pageSize:m}){s({...e,current:r,pageSize:m})}function S(r){s({...r,pageSize:e.pageSize,current:1,unixTime:j().unix()})}return b(k,{children:[t(N,{heading:6,children:"部门列表"}),t(B,{onSearch:S}),t("div",{className:P["button-group"],children:t(T,{children:t(x,{type:"primary",icon:t(z,{}),onClick:()=>o(!0),children:"新增"})})}),t(w,{rowKey:"id",loading:g,onChange:h,pagination:{sizeCanChange:!0,showTotal:!0,pageSizeChangeResetCurrent:!0,current:e.current,pageSize:e.pageSize,total:(p=a==null?void 0:a.pagination)==null?void 0:p.total},columns:f,data:a==null?void 0:a.data}),u&&t(v,{data:l,onClose:()=>{o(!1),c({}),i(e)}})]})}export{$ as default};
