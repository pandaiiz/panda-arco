import{d as f,l as b,r as K,j as c,n as u,h as R,B as v}from"./index-2fe9f87b.js";import"./index-051f16ed.js";/* empty css              */import{S as s}from"./index-99f088e0.js";import{T as B}from"./index-18b86337.js";import"./index-a8984739.js";import{d as P}from"./service-735e5b75.js";import T from"./pictureUpload-f4b426bf.js";import{g as j}from"./service-82e768f3.js";import"./select-view-e3752154.js";import"./index-26e1abb8.js";import"./index-a3018368.js";import"./index-36185895.js";import"./index-ed7d1e53.js";import"./index-6b64cf7e.js";import"./index.browser-7e542916.js";import"./rotate-c57d4b9d.js";const $=({detailData:p,setDetailData:h,setSelectedRow:m,selectedRow:y})=>{const{data:C}=f(()=>b("CATEGORY")),{data:S}=f(()=>b("SPEC")),{data:I}=f(()=>b("TECH")),{data:E}=f(()=>j("PROGRAM")),O=[{title:"图片",dataIndex:"realitySrc",align:"center",render:(l,e,t)=>c(T,{url:e.realitySrc,onChange:n=>{var i,d;const o=u.cloneDeep(p);o[t].realitySrc=(d=(i=n[0])==null?void 0:i.response)==null?void 0:d.src,h(o)}})},{title:"款号",dataIndex:"styleId",align:"center",width:300,render:(l,e)=>c(R,{disabled:!0,value:e==null?void 0:e.styleCode,style:{width:"75%"}})},{title:"品名",dataIndex:"category",align:"center",width:160,render:(l,e,t)=>c(s,{placeholder:"请选择品名",allowClear:!0,value:e.category,onChange:(n,o)=>{const i=w.filter(r=>r!==e.nanoid),d=y.filter(r=>r.nanoid!==e.nanoid);g(i),m(d);const a=u.cloneDeep(p);n?(a[t].category=n,a[t].categoryName="children"in o?o.children:""):(a[t].category="",a[t].categoryName=""),h(a)},children:C==null?void 0:C.map(n=>c(s.Option,{value:n.key,children:n.title},n.id))})},{title:"编程",dataIndex:"programmerId",align:"center",width:160,render:(l,e,t)=>{var n;return c(s,{placeholder:"请选择编程",allowClear:!0,value:e.programmerId,onChange:(o,i)=>{const d=w.filter(N=>N!==e.nanoid),a=y.filter(N=>N.nanoid!==e.nanoid);g(d),m(a);const r=u.cloneDeep(p);o?(r[t].category=o,r[t].categoryName="children"in i?i.children:""):(r[t].category="",r[t].categoryName=""),h(r)},children:(n=E==null?void 0:E.users)==null?void 0:n.map(o=>c(s.Option,{value:o.id,children:o.name},o.code))})}},{title:"规格",dataIndex:"spec",align:"center",width:160,render:(l,e,t)=>c(s,{placeholder:"请选择规格",allowClear:!0,value:e.spec,onChange:(n,o)=>{const i=w.filter(r=>r!==e.nanoid),d=y.filter(r=>r.nanoid!==e.nanoid);g(i),m(d);const a=u.cloneDeep(p);n?(a[t].category=n,a[t].categoryName="children"in o?o.children:""):(a[t].category="",a[t].categoryName=""),h(a)},children:S==null?void 0:S.map(n=>c(s.Option,{value:n.key,children:n.title},n.id))})},{title:"工艺",dataIndex:"tech",align:"center",width:160,render:(l,e,t)=>c(s,{placeholder:"请选择工艺",allowClear:!0,value:e.tech,onChange:(n,o)=>{const i=w.filter(r=>r!==e.nanoid),d=y.filter(r=>r.nanoid!==e.nanoid);g(i),m(d);const a=u.cloneDeep(p);n?(a[t].category=n,a[t].categoryName="children"in o?o.children:""):(a[t].category="",a[t].categoryName=""),h(a)},children:I==null?void 0:I.map(n=>c(s.Option,{value:n.key,children:n.title},n.id))})},{title:"操作",align:"center",width:120,render:(l,e,t)=>c(v,{disabled:e.status===1,type:"text",onClick:()=>k(e.id,t),children:"删除"})}],k=async(l,e)=>{l&&await P(l),h(p.filter((t,n)=>n!==e))},[w,g]=K.useState([]);return K.useEffect(()=>{g(y.map(l=>l.nanoid))},[y]),c(B,{scroll:{y:window.screen.height-300},columns:O,data:p,pagination:!1,rowKey:"nanoid",rowSelection:{type:"checkbox",selectedRowKeys:w,onChange:(l,e)=>{g(l),m(e)},checkboxProps:l=>({disabled:!l.category||l.status===1})}})};export{$ as default};
